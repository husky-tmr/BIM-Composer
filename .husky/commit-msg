# Validate commit message format
# Format: type(scope): subject
# Example: feat(viewer): add zoom controls

commit_msg=$(cat "$1")

# Pattern: type(optional-scope): subject
pattern="^(feat|fix|docs|style|refactor|test|chore|perf|ci|build|revert)(\(.+\))?: .{1,100}$"

if ! echo "$commit_msg" | grep -qE "$pattern"; then
    echo "‚ùå Invalid commit message format!"
    echo ""
    echo "Format: type(scope): subject"
    echo ""
    echo "Types:"
    echo "  feat:     New feature"
    echo "  fix:      Bug fix"
    echo "  docs:     Documentation only"
    echo "  style:    Code style (formatting, etc)"
    echo "  refactor: Code refactoring"
    echo "  test:     Adding/updating tests"
    echo "  chore:    Maintenance tasks"
    echo "  perf:     Performance improvements"
    echo "  ci:       CI/CD changes"
    echo "  build:    Build system changes"
    echo "  revert:   Revert previous commit"
    echo ""
    echo "Example: feat(viewer): add zoom controls"
    echo ""
    exit 1
fi
